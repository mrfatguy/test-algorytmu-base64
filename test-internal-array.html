<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>test-internal-array</title>
</head>
<body>
    <h1>test-internal-array</h1>
    <h3>Adres URL: <a href="url" id="url"></a></h3>
    <h3>Można uruchamiać TYLKO przez XAMPP lub inny serwer, tylko przez "localhost".</h3>
    <h3>Próba uruchomienia bezpośrednio (z pliku .html) kończy się błędem CORS.</h3>
    <h2>Naciśnij F12 aby otworzyć konsolę i zobaczyć efekty...</h2>
    
    <script>
        var http_request = new XMLHttpRequest();
        var url = "http://localhost/micro-app/web/index.php?r=post";
        var span = document.getElementById("url");

        span.textContent = url;
        span.href = url;

        http_request.onreadystatechange = handle_json;
        http_request.open("GET", url);
        http_request.send("{id:7}");

        function handle_json() {
            if (http_request.readyState == 4) {
                    if (http_request.status == 200) {
                            var json_data = http_request.responseText;
                            var the_object = JSON.parse(json_data);
                            
                            console.log(the_object);
                    } else {
                            alert('Wystąpił problem z wybranym adresem URL.');
                    }
                    http_request = null;
            }
        }
    </script>
</body>
</html>